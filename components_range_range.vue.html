<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>components/range/range.vue - Documentation</title>
    <meta name="viewport"
          content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="scripts/qrcode.js"></script>
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/custom.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>

    <section class="vimo">
        <div class="vimo__imgBox">
            <img class="vimo__imgBox--img" src="./asset/img/vimo.png">
        </div>

        <div class="vimo__title">
            <h2>VIMO</h2>
            <!--<p>beta</p>-->
            <p>基于Vue2.x的移动端Hybrid框架</p>
        </div>
        <div class="vimo__iframe">
            <iframe src="https://ghbtns.com/github-btn.html?user=vm-component&amp;repo=Vimo&amp;type=star&amp;count=true"
                    frameborder="0" scrolling="0" width="110px" height="20px"
                    class="enter-transition"
                    style=""></iframe>
            <iframe src="https://ghbtns.com/github-btn.html?user=vm-component&amp;repo=Vimo&amp;type=fork&amp;count=true"
                    frameborder="0" scrolling="0" width="95px" height="20px"
                    class="enter-transition"
                    style=""></iframe>
        </div>
    </section>
    <section class="nav__header"><h2><a href="index.html">首页 / Home</a></h2><h2><a href="https://nostaff.github.io/vimo-demo">示例 / Demo</a></h2><h2><a href="https://github.com/nostaff/vimo-start-kit">如何开始 / How To Start</a></h2><h2><a href="https://github.com/nostaff/vimo/blob/master/CHANGELOG.md">更新日志 / Change Log</a></h2><h2><a href="#">常见问题 / Question</a></h2></section><h3>组件 / Components</h3><ul><li><a href="component-ActionSheet.html">ActionSheet</a><ul class='methods'><li data-type='method'><a href="component-ActionSheet.html#~dismiss">dismiss</a></li><li data-type='method'><a href="component-ActionSheet.html#~present">present</a></li></ul></li><li><a href="component-Alert.html">Alert</a><ul class='methods'><li data-type='method'><a href="component-Alert.html#~dismiss">dismiss</a></li><li data-type='method'><a href="component-Alert.html#~present">present</a></li></ul></li><li><a href="component-App.html">App</a><ul class='methods'><li data-type='method'><a href="component-App.html#~setClass">setClass</a></li><li data-type='method'><a href="component-App.html#~setDisableScroll">setDisableScroll</a></li><li data-type='method'><a href="component-App.html#~setDocTitle">setDocTitle</a></li><li data-type='method'><a href="component-App.html#~setEnabled">setEnabled</a></li></ul></li><li><a href="component-Avatar.html">Avatar</a></li><li><a href="component-Backdrop.html">Backdrop</a></li><li><a href="component-Badge.html">Badge</a></li><li><a href="component-Button.html">Button</a></li><li><a href="component-Card.html">Card</a></li><li><a href="component-Card_card-content.html">Card/card-content</a></li><li><a href="component-Card_card-title.html">Card/card-title</a></li><li><a href="component-Card_cardHeader.html">Card/cardHeader</a></li><li><a href="component-Checkbox.html">Checkbox</a></li><li><a href="component-ChooseCity.html">ChooseCity</a><ul class='methods'><li data-type='method'><a href="component-ChooseCity.html#~present">present</a></li></ul></li><li><a href="component-CityPicker.html">CityPicker</a></li><li><a href="component-Content.html">Content</a><ul class='methods'><li data-type='method'><a href="component-Content.html#~getContentDimensions">getContentDimensions</a></li><li data-type='method'><a href="component-Content.html#~resize">resize</a></li><li data-type='method'><a href="component-Content.html#~scrollBy">scrollBy</a></li><li data-type='method'><a href="component-Content.html#~scrollTo">scrollTo</a></li><li data-type='method'><a href="component-Content.html#~scrollToBottom">scrollToBottom</a></li><li data-type='method'><a href="component-Content.html#~scrollToElement">scrollToElement</a></li><li data-type='method'><a href="component-Content.html#~scrollToTop">scrollToTop</a></li></ul></li><li><a href="component-Datetime.html">Datetime</a></li><li><a href="component-Fab.html">Fab</a><ul class='methods'><li data-type='method'><a href="component-Fab.html#~close">close</a></li></ul></li><li><a href="component-Fab_FabButton.html">Fab/FabButton</a></li><li><a href="component-Fab_FabList.html">Fab/FabList</a></li><li><a href="component-Feedback.html">Feedback</a><ul class='methods'><li data-type='method'><a href="component-Feedback.html#~destroy">destroy</a></li><li data-type='method'><a href="component-Feedback.html#~update">update</a></li></ul></li><li><a href="component-Footer.html">Footer</a><ul class='methods'><li data-type='method'><a href="component-Footer.html#~hide">hide</a></li><li data-type='method'><a href="component-Footer.html#~setStyle">setStyle</a></li><li data-type='method'><a href="component-Footer.html#~show">show</a></li><li data-type='method'><a href="component-Footer.html#~toggle">toggle</a></li></ul></li><li><a href="component-Grid.html">Grid</a></li><li><a href="component-Grid_Column.html">Grid/Column</a></li><li><a href="component-Grid_vm-row.html">Grid/vm-row</a></li><li><a href="component-Header.html">Header</a><ul class='methods'><li data-type='method'><a href="component-Header.html#~hide">hide</a></li><li data-type='method'><a href="component-Header.html#~setStyle">setStyle</a></li><li data-type='method'><a href="component-Header.html#~show">show</a></li><li data-type='method'><a href="component-Header.html#~toggle">toggle</a></li></ul></li><li><a href="component-Icon.html">Icon</a></li><li><a href="component-Img.html">Img</a></li><li><a href="component-Indicator.html">Indicator</a><ul class='methods'><li data-type='method'><a href="component-Indicator.html#.dismiss">dismiss</a></li><li data-type='method'><a href="component-Indicator.html#.present">present</a></li></ul></li><li><a href="component-InfiniteScroll.html">InfiniteScroll</a><ul class='methods'><li data-type='method'><a href="component-InfiniteScroll.html#~complete">complete</a></li><li data-type='method'><a href="component-InfiniteScroll.html#~enable">enable</a></li><li data-type='method'><a href="component-InfiniteScroll.html#~waitFor">waitFor</a></li></ul></li><li><a href="component-InfiniteScroll_InfiniteScrollContent.html">InfiniteScroll/InfiniteScrollContent</a></li><li><a href="component-Input.html">Input</a></li><li><a href="component-Item.html">Item</a></li><li><a href="component-Item_ItemDivider.html">Item/ItemDivider</a></li><li><a href="component-Item_ItemGroup.html">Item/ItemGroup</a></li><li><a href="component-Item_ListHeader.html">Item/ListHeader</a></li><li><a href="component-Label.html">Label</a></li><li><a href="component-List.html">List</a></li><li><a href="component-Loading.html">Loading</a><ul class='methods'><li data-type='method'><a href="component-Loading.html#~dismiss">dismiss</a></li><li data-type='method'><a href="component-Loading.html#~present">present</a></li></ul></li><li><a href="component-Menus.html">Menus</a><ul class='methods'><li data-type='method'><a href="component-Menus.html#~close">close</a></li><li data-type='method'><a href="component-Menus.html#~open">open</a></li><li data-type='method'><a href="component-Menus.html#~toggle">toggle</a></li></ul></li><li><a href="component-Modal.html">Modal</a><ul class='methods'><li data-type='method'><a href="component-Modal.html#~dismiss">dismiss</a></li><li data-type='method'><a href="component-Modal.html#~present">present</a></li></ul></li><li><a href="component-Nav.html">Nav</a></li><li><a href="component-Navbar.html">Navbar</a><ul class='methods'><li data-type='method'><a href="component-Navbar.html#~hideOptionButton">hideOptionButton</a></li><li data-type='method'><a href="component-Navbar.html#~reset">reset</a></li><li data-type='method'><a href="component-Navbar.html#~showOptionButton">showOptionButton</a></li><li data-type='method'><a href="component-Navbar.html#~showPopMenu">showPopMenu</a></li></ul></li><li><a href="component-Note.html">Note</a></li><li><a href="component-NoticeBar.html">NoticeBar</a><ul class='methods'><li data-type='method'><a href="component-NoticeBar.html#~close">close</a></li></ul></li><li><a href="component-Page.html">Page</a></li><li><a href="component-Picker.html">Picker</a><ul class='methods'><li data-type='method'><a href="component-Picker.html#~dismiss">dismiss</a></li><li data-type='method'><a href="component-Picker.html#~present">present</a></li></ul></li><li><a href="component-Popover.html">Popover</a><ul class='methods'><li data-type='method'><a href="component-Popover.html#~dismiss">dismiss</a></li><li data-type='method'><a href="component-Popover.html#~present">present</a></li></ul></li><li><a href="component-PopSheet.html">PopSheet</a><ul class='methods'><li data-type='method'><a href="component-PopSheet.html#~dismiss">dismiss</a></li><li data-type='method'><a href="component-PopSheet.html#~present">present</a></li></ul></li><li><a href="component-PreviewImage.html">PreviewImage</a></li><li><a href="component-Radio.html">Radio</a></li><li><a href="component-Range.html">Range</a></li><li><a href="component-Refresher.html">Refresher</a><ul class='methods'><li data-type='method'><a href="component-Refresher.html#~cancel">cancel</a></li><li data-type='method'><a href="component-Refresher.html#~complete">complete</a></li></ul></li><li><a href="component-Refresher_RefresherContent.html">Refresher/RefresherContent</a></li><li><a href="component-Scroll.html">Scroll</a></li><li><a href="component-ScrollSegment.html">ScrollSegment</a></li><li><a href="component-ScrollSegment_ScrollSegmentButton.html">ScrollSegment/ScrollSegmentButton</a></li><li><a href="component-Searchbar.html">Searchbar</a><ul class='methods'><li data-type='method'><a href="component-Searchbar.html#~setFocus">setFocus</a></li></ul></li><li><a href="component-Segment.html">Segment</a></li><li><a href="component-Segment_SegmentButton.html">Segment/SegmentButton</a></li><li><a href="component-Select.html">Select</a></li><li><a href="component-Select_SelectOption.html">Select/SelectOption</a></li><li><a href="component-Separation.html">Separation</a></li><li><a href="component-Sheet.html">Sheet</a><ul class='methods'><li data-type='method'><a href="component-Sheet.html#~dismiss">dismiss</a></li><li data-type='method'><a href="component-Sheet.html#~present">present</a></li></ul></li><li><a href="component-SlideBox.html">SlideBox</a><ul class='methods'><li data-type='method'><a href="component-SlideBox.html#~cancel">cancel</a></li><li data-type='method'><a href="component-SlideBox.html#~checking">checking</a></li><li data-type='method'><a href="component-SlideBox.html#~complete">complete</a></li><li data-type='method'><a href="component-SlideBox.html#~fail">fail</a></li></ul></li><li><a href="component-Slides.html">Slides</a></li><li><a href="component-Slides_Slide.html">Slides/Slide</a></li><li><a href="component-SlidesLite.html">SlidesLite</a></li><li><a href="component-SlidesLite_Slide.html">SlidesLite/Slide</a></li><li><a href="component-Spinner.html">Spinner</a></li><li><a href="component-Tabs.html">Tabs</a><ul class='methods'><li data-type='method'><a href="component-Tabs.html#~getActivatedIndex">getActivatedIndex</a></li><li data-type='method'><a href="component-Tabs.html#~getByIndex">getByIndex</a></li><li data-type='method'><a href="component-Tabs.html#~getSelected">getSelected</a></li><li data-type='method'><a href="component-Tabs.html#~select">select</a></li></ul></li><li><a href="component-Tabs_Tab.html">Tabs/Tab</a></li><li><a href="component-Textarea.html">Textarea</a><ul class='methods'><li data-type='method'><a href="component-Textarea.html#~destroy">destroy</a></li><li data-type='method'><a href="component-Textarea.html#~update">update</a></li></ul></li><li><a href="component-Thumbnail.html">Thumbnail</a></li><li><a href="component-Toast.html">Toast</a></li><li><a href="component-Toggle.html">Toggle</a></li><li><a href="component-Toolbar.html">Toolbar</a></li><li><a href="component-Toolbar_Buttons.html">Toolbar/Buttons</a></li><li><a href="component-Toolbar_Title.html">Toolbar/Title</a><ul class='methods'><li data-type='method'><a href="component-Toolbar_Title.html#~getTitle">getTitle</a></li><li data-type='method'><a href="component-Toolbar_Title.html#~reset">reset</a></li><li data-type='method'><a href="component-Toolbar_Title.html#~setTitle">setTitle</a></li><li data-type='method'><a href="component-Toolbar_Title.html#~setTitleColor">setTitleColor</a></li></ul></li></ul><h3>类 / Classes</h3><ul><li><a href="Config.html">Config</a><ul class='methods'><li data-type='method'><a href="Config.html#cache">cache</a></li><li data-type='method'><a href="Config.html#get">get</a></li><li data-type='method'><a href="Config.html#getBoolean">getBoolean</a></li><li data-type='method'><a href="Config.html#getNumber">getNumber</a></li><li data-type='method'><a href="Config.html#set">set</a></li><li data-type='method'><a href="Config.html#settings">settings</a></li></ul></li><li><a href="History.html">History</a><ul class='methods'><li data-type='method'><a href="History.html#canGoBack">canGoBack</a></li><li data-type='method'><a href="History.html#getDirection">getDirection</a></li><li data-type='method'><a href="History.html#getHistory">getHistory</a></li><li data-type='method'><a href="History.html#toRoot">toRoot</a></li></ul></li><li><a href="Platform.html">Platform</a><ul class='methods'><li data-type='method'><a href="Platform.html#exitApp">exitApp</a></li><li data-type='method'><a href="Platform.html#height">height</a></li><li data-type='method'><a href="Platform.html#is">is</a></li><li data-type='method'><a href="Platform.html#isLandscape">isLandscape</a></li><li data-type='method'><a href="Platform.html#isPortrait">isPortrait</a></li><li data-type='method'><a href="Platform.html#lang">lang</a></li><li data-type='method'><a href="Platform.html#navigatorPlatform">navigatorPlatform</a></li><li data-type='method'><a href="Platform.html#networkType">networkType</a></li><li data-type='method'><a href="Platform.html#onNetworkChange">onNetworkChange</a></li><li data-type='method'><a href="Platform.html#platforms">platforms</a></li><li data-type='method'><a href="Platform.html#ready">ready</a></li><li data-type='method'><a href="Platform.html#userAgent">userAgent</a></li><li data-type='method'><a href="Platform.html#versions">versions</a></li><li data-type='method'><a href="Platform.html#width">width</a></li></ul></li></ul><h3>模块 / Modules</h3><ul><li><a href="module-Util.html">Util</a><ul class='methods'><li data-type='method'><a href="module-Util.html#.clamp">clamp</a></li><li data-type='method'><a href="module-Util.html#.defaults">defaults</a></li><li data-type='method'><a href="module-Util.html#.docReady">docReady</a></li><li data-type='method'><a href="module-Util.html#.firstUpperCase">firstUpperCase</a></li><li data-type='method'><a href="module-Util.html#.focusOutActiveElement">focusOutActiveElement</a></li><li data-type='method'><a href="module-Util.html#.hasClass">hasClass</a></li><li data-type='method'><a href="module-Util.html#.hasFocus">hasFocus</a></li><li data-type='method'><a href="module-Util.html#.isActive">isActive</a></li><li data-type='method'><a href="module-Util.html#.isArray">isArray</a></li><li data-type='method'><a href="module-Util.html#.isBlank">isBlank</a></li><li data-type='method'><a href="module-Util.html#.isBoolean">isBoolean</a></li><li data-type='method'><a href="module-Util.html#.isCheckedProperty">isCheckedProperty</a></li><li data-type='method'><a href="module-Util.html#.isDate">isDate</a></li><li data-type='method'><a href="module-Util.html#.isDefined">isDefined</a></li><li data-type='method'><a href="module-Util.html#.isFunction">isFunction</a></li><li data-type='method'><a href="module-Util.html#.isNumber">isNumber</a></li><li data-type='method'><a href="module-Util.html#.isObject">isObject</a></li><li data-type='method'><a href="module-Util.html#.isPassive">isPassive</a></li><li data-type='method'><a href="module-Util.html#.isPlainObject">isPlainObject</a></li><li data-type='method'><a href="module-Util.html#.isPresent">isPresent</a></li><li data-type='method'><a href="module-Util.html#.isPrimitive">isPrimitive</a></li><li data-type='method'><a href="module-Util.html#.isRegexp">isRegexp</a></li><li data-type='method'><a href="module-Util.html#.isString">isString</a></li><li data-type='method'><a href="module-Util.html#.isTrueProperty">isTrueProperty</a></li><li data-type='method'><a href="module-Util.html#.isUndefined">isUndefined</a></li><li data-type='method'><a href="module-Util.html#.parsePxUnit">parsePxUnit</a></li><li data-type='method'><a href="module-Util.html#.pointerCoord">pointerCoord</a></li><li data-type='method'><a href="module-Util.html#.registerListener">registerListener</a></li><li data-type='method'><a href="module-Util.html#.setElementClass">setElementClass</a></li><li data-type='method'><a href="module-Util.html#.transitionEnd">transitionEnd</a></li><li data-type='method'><a href="module-Util.html#.urlChange">urlChange</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#findReorderItem">findReorderItem</a></li><li><a href="global.html#indexForItem">indexForItem</a></li></ul>
</nav>

<div id="main">

    <article class="content">

        
        <h1 class="page-title">components/range/range.vue</h1>
        

        




    <section>
        <article>
            <pre class="prettyprint source linenums"><code>&lt;template>
    &lt;div class="ion-range range" :class="[modeClass, colorClass,
        {'range-has-pin':pin,
        'range-pressed':pressed,
        'range-disabled':disabled}
        ]"
         @touchstart="pointerDown($event)"
         @touchmove="pointerMove($event)"
         @touchend="pointerUp($event)"
         @mousedown="pointerDown($event)"
         @mousemove="pointerMove($event)"
         @mouseup="pointerUp($event)">
        &lt;slot name="range-left">
            &lt;vm-label range-left>{{min}}&lt;/vm-label>
        &lt;/slot>
        &lt;div class="range-slider">
            &lt;div class="range-tick" :class="{'range-tick-active':tick.active}" role="presentation" v-for="(tick, index) in ticks" :style="'left:'+tick.left" v-if="snaps">&lt;/div>
            &lt;div class="range-bar" role="presentation">&lt;/div>
            &lt;div class="range-bar range-bar-active" role="presentation" :style="{left: barL, right: barR}">&lt;/div>
            &lt;div class="range-knob-handle" role="slider" :aria-valuenow="valA" :aria-valuemin="min" :aria-valuemax="max" tabindex="0" :disabled="disabled" :style="{left: sliderA}">
                &lt;div class="range-pin" role="presentation" v-if="pin">{{valA}}&lt;/div>
                &lt;div class="range-knob" role="presentation">&lt;/div>
            &lt;/div>
            &lt;div class="range-knob-handle" role="slider" :aria-valuenow="valB" :aria-valuemin="min" :aria-valuemax="max" tabindex="1" :disabled="disabled" :style="{left: sliderB}" v-if="dual">
                &lt;div class="range-pin" role="presentation" v-if="pin">{{valB}}&lt;/div>
                &lt;div class="range-knob" role="presentation">&lt;/div>
            &lt;/div>
        &lt;/div>
        &lt;slot name="range-right">
            &lt;vm-label range-right>{{max}}&lt;/vm-label>
        &lt;/slot>
    &lt;/div>
&lt;/template>

&lt;style lang="scss">
    @import 'range';
    @import 'range.ios';
    @import 'range.md';
&lt;/style>

&lt;script>
  /**
   *
   * @component Range
   * @description
   *
   * ## 表单组件 / Range滑块组件
   *
   *
   * ### 注意
   *
   * @props {String} [color] - 颜色
   * @props {Boolean} [disabled=false] - 是否禁用
   * @props {Boolean} [dual=false] - 选择的拖动按钮, 默认是一个, true为两个
   * @props {Number} [max=100] - range的最大值
   * @props {Number} [min=0] - range的最小值
   * @props {String} [mode='ios'] - 模式
   * @props {Boolean} [pin=false] - 当拖动knob时显示大头针提示
   * @props {Boolean} [snaps=false] - 类似于卡槽, 如果为true, 则在range上画标尺, 并且拖动中knob只能停留在标尺标记处
   * @props {Number} [step=1] - 移动的步伐/粒度
   * @props {String| Number| Object} [value] - v-model对应的值, 需要出发input事件
   *
   * @slot range-right - 在range组件右边, 一般放Icon
   * @slot range-left - 在range组件左边, 一般放Icon
   *
   * @demo #/range
   *
   * @usage
   * &lt;vm-list>
   *    &lt;vm-list-header>
   *        &lt;span>Brightness&lt;/span>
   *        &lt;vm-badge slot="item-end">{{brightness}}&lt;/vm-badge>
   *    &lt;/vm-list-header>
   *    &lt;vm-item>
   *         &lt;vm-range v-model="brightness">
   *            &lt;vm-icon slot="range-left" small name="sunny">&lt;/vm-icon>
   *            &lt;vm-icon slot="range-right" name="sunny">&lt;/vm-icon>
   *        &lt;/vm-range>
   *    &lt;/vm-item>
   * &lt;/vm-list>
   *
   * */
  import { setElementClass, pointerCoord, clamp, isNumber, isObject, isString } from '../../util/util'
  import ThemeMixins from '../../themes/theme.mixins';
  import VmLabel from "../label/label.vue";
  export default {
    components: {VmLabel},
    name: 'vm-range',
    mixins: [ThemeMixins],
    data() {
      return {
        ticks: [],
        rect: [],
        pressed: false,
        ratioA: 0,
        ratioB: 0,
        valA: 0,
        valB: 0,
        pressedA: false,
        pressedB: false,
        barL: '',
        barR: '',
        sliderA: '',
        sliderB: '',
      }
    },
    props: {
      value: {
        type: [Number, Object],
        default: 50
      },
      step: {
        type: Number,
        default: 1
      },
      min: {
        type: Number,
        default: 0
      },
      max: {
        type: Number,
        default: 100
      },
      pin: {
        type: Boolean,
        default: false
      },
      snaps: {
        type: Boolean,
        default: false
      },
      dual: {
        type: Boolean,
        default: false,
      },
      disabled: {
        type: Boolean,
        default: false,
      },
    },

    computed: {
      /**
       * Returns the ratio of the knob's is current location, which is a number
       * between `0` and `1`. If two knobs are used, this property represents
       * the lower value.
       */
      ratio: function() {
        if (this.dual) {
          return Math.min(this.ratioA, this.ratioB);
        }
        return this.ratioA;
      },

      /**
       * Returns the ratio of the upper value's is current location, which is
       * a number between `0` and `1`. If there is only one knob, then this
       * will return `null`.
       */
      ratioUpper: function() {
        if (this.dual) {
          return Math.max(this.ratioA, this.ratioB);
        }
        return null;
      }

    },

    created() {
      this.inputUpdated();

      // build all the ticks if there are any to show
      this.createTicks();
    },
    mounted() {
      if (this.$parent.$options.name === 'vm-item') {
        this.$parent.$el.classList.add('item-range');
      }

      if (this.$slots['range-left']) {
        this.$slots['range-left'].forEach(function (item) {
          item.elm.setAttribute('range-left', '')
        })
      }
      if (this.$slots['range-right']) {
        this.$slots['range-right'].forEach(function (item) {
          item.elm.setAttribute('range-right', '')
        })
      }
    },
    methods: {
      pointerDown(ev) {
        if (this.disabled) {
          return false;
        }

        // prevent default so scrolling does not happen
        ev.preventDefault();
        ev.stopPropagation();

        // get the start coordinates
        const current = pointerCoord(ev);

        // get the full dimensions of the slider element
        const rect = this.rect = this.$el.getBoundingClientRect();

        // figure out which knob they started closer to
        const ratio = clamp(0, (current.x - rect.left) / (rect.width), 1);
        this.activeB = this.dual &amp;&amp; (Math.abs(ratio - this.ratioA) > Math.abs(ratio - this.ratioB));

        // update the active knob's position
        this._updatePos(current, rect, true);

        // return true so the pointer events
        // know everything's still valid
        return true;
      },

      pointerMove(ev) {
        if (this.disabled) {
          return;
        }
        // prevent default so scrolling does not happen
        ev.preventDefault();
        ev.stopPropagation();

        // update the active knob's position
        this._updatePos(pointerCoord(ev), this.rect, true);
      },

      pointerUp(ev) {
        if (this.disabled) {
          return;
        }
        // prevent default so scrolling does not happen
        ev.preventDefault();
        ev.stopPropagation();

        // update the active knob's position
        this._updatePos(pointerCoord(ev), this.rect, false);
      },

      _updatePos(current, rect, isPressed) {
        // figure out where the pointer is currently at
        // update the knob being interacted with
        let ratio = clamp(0, (current.x - rect.left) / (rect.width), 1);
        let val = this._ratioToValue(ratio);

        if (this.snaps) {
          // snaps the ratio to the current value
          ratio = this._valueToRatio(val);
        }

        // update which knob is pressed
        this.pressed = isPressed;
        let valChanged = false;
        if (this.activeB) {
          // when the pointer down started it was determined
          // that knob B was the one they were interacting with
          this.pressedB = isPressed;
          this.pressedA = false;
          this.ratioB = ratio;
          valChanged = val === this.valB;
          this.valB = val;
        } else {
          // interacting with knob A
          this.pressedA = isPressed;
          this.pressedB = false;
          this.ratioA = ratio;
          valChanged = val === this.valA;
          this.valA = val;
        }
        this.updateBar();
        if (valChanged) {
          return false;
        }

        // value has been updated
        let value;
        if (this.dual) {
          // dual knobs have an lower and upper value
          value = {
            lower: Math.min(this.valA, this.valB),
            upper: Math.max(this.valA, this.valB)
          };

          console.debug(`range, updateKnob: ${ratio}, lower: ${this.value.lower}, upper: ${this.value.upper}`);

        } else {
          // single knob only has one value
          value = this.valA;
          console.debug(`range, updateKnob: ${ratio}, value: ${this.value}`);
        }

        // Update input value
        this.$emit('input', value)

        return true;
      },

      /** @internal */
      updateBar() {
        const ratioA = this.ratioA;
        const ratioB = this.ratioB;

        if (this.dual) {
          this.barL = `${(Math.min(ratioA, ratioB) * 100)}%`;
          this.barR = `${100-(Math.max(ratioA, ratioB) * 100)}%`;

          this.sliderA = `${(Math.min(ratioA, ratioB) * 100)}%`;
          this.sliderB = `${(Math.max(ratioA, ratioB) * 100)}%`;

        } else {
          this.barL = '';
          this.barR = `${100 - (ratioA * 100)}%`;

          this.sliderA = `${(ratioA * 100)}%`;
          this.sliderB = '';
        }

        this.updateTicks();
      },

      createTicks() {
        if (this.snaps) {
          this.ticks = [];
          for (var value = this.min; value &lt;= this.max; value += this.step) {
            var ratio = this._valueToRatio(value);
            this.ticks.push({
              ratio: ratio,
              left: `${ratio * 100}%`,
            });
          }
          this.updateTicks();
        }

      },

      updateTicks() {
        const ticks = this.ticks;
        const ratio = this.ratio;

        if (this.snaps &amp;&amp; ticks) {
          if (this.dual) {
            var upperRatio = this.ratioUpper;

            ticks.forEach(t => {
              t.active = (t.ratio >= ratio &amp;&amp; t.ratio &lt;= upperRatio);
            });

          } else {
            ticks.forEach(t => {
              t.active = (t.ratio &lt;= ratio);
            });
          }
        }

      },

      inputUpdated() {
        const val = this.value;
        if (this.dual) {
          this.valA = val.lower;
          this.valB = val.upper;
          this.ratioA = this._valueToRatio(val.lower);
          this.ratioB = this._valueToRatio(val.upper);
        } else {
          this.valA = val;
          this.ratioA = this._valueToRatio(val);
        }

        this.updateBar();
      },

      _ratioToValue(ratio) {
        ratio = Math.round(((this.max - this.min) * ratio));
        ratio = Math.round(ratio / this.step) * this.step + this.min;
        return clamp(this.min, ratio, this.max);
      },

      _valueToRatio(value) {
        value = Math.round((value - this.min) / this.step) * this.step;
        value = value / (this.max - this.min);
        return clamp(0, value, 1);
      }
    }
  }
&lt;/script></code></pre>
        </article>
    </section>





    </article>
</div>

<br class="clear">

<!--<footer>-->
    <!--文档根据<a href="https://github.com/nostaff/Vimo">Vimo源码</a>由<a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a>自动生成, 主题修改自<a href="https://github.com/clenemt/docdash">docdash</a>, 并增加了 @component / @demo / @props / @slot / @usage 增强标注.-->
<!--</footer>-->

<footer>
    文档根据<a href="https://github.com/nostaff/Vimo">Vimo源码</a>由<a href="https://github.com/jsdoc3/jsdoc">JSDoc3.5.5</a>自动生成。
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
